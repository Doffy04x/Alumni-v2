<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>User profile</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="images/icons/favicon.ico"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
        <style type="text/css">
    body {
        font-family: 'Arial', sans-serif;
        margin: 0;
        padding: 0;
        background: #f7f7f7; /* Light grey background */
        color: #333; /* Dark grey text */
    }
    
    .profile-container {
        max-width: 1200px;
        margin: 2rem auto;
        padding: 2rem;
        background: #fff;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: flex-start;
    }
    
    .profile-header {
        text-align: center;
        flex-basis: 30%;
        padding: 1rem;
        border-right: 1px solid #ececec;
    }
    
    .profile-content {
        flex-basis: 70%;
        padding: 1rem;
    }
    
    .profile-image {
        width: 200px;
        height: 200px;
        border-radius: 50%;
        object-fit: cover;
        border: 5px solid #eee; /* Light grey border */
        margin-bottom: 1rem;
    }
    
    @font-face {
    font-family: 'Century Gothic';
    src: url('fonts/CenturyGothic.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Century Gothic';
    src: url('fonts/gothicb.ttf') format('truetype');
    font-weight: bold;
    font-style: normal;
}

body {
    font-family: 'Century Gothic', sans-serif;
}

h1 {
    font-size: 2.5rem;
    color: #490d73;
    font-family: 'Century Gothic', sans-serif;
    font-weight: normal; /* Use 'bold' for the bold font */
    font-weight: bold;

}


    
    h2 {
        font-size: 2rem;
        margin-top: 1.5rem;
        color: #333; /* Dark grey text */
        font-weight: bold;

    }
    
    p {
        font-size: 1rem;
        line-height: 1.6;
        margin-bottom: 0.5rem;
    }
    
    .send-email {
        display: inline-block;
        background: #e32209;
        color: white;
        padding: 0.5rem 1rem;
        text-decoration: none;
        border-radius: 5px;
        margin-top: 1rem;
        font-size: 1rem;
        transition: background-color 0.3s;
    }
    
    .send-email:hover {
        background: #17e209; /* A darker shade of primary color */
    }
    
   
    
.profile-icon {
    height: 32px; /* Adjust the size as needed */
    width: auto; /* Keeps the aspect ratio */
    cursor: pointer; /* Changes the cursor to indicate it's clickable */
}

/* Style the dropdown menu */
.dropdown-menu {
    right: 0; /* Align the dropdown to the right */
}
#signOutButton {
    padding: .375rem .75rem; /* Button padding */
    border: 1px solid #dc3545; /* Border to match text color */
    border-radius: .25rem; /* Rounded corners for the button */
    background-color: transparent; /* Transparent background */
    transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out;
}

#signOutButton:hover {
    color: #fff; /* White text on hover */
    background-color: #dc3545; /* Red background on hover */
    text-decoration: none; /* Remove underline on hover */
}   
.professional-info {
    display: flex;
    justify-content: space-between;
}

.professional-column {
    flex-basis: 50%; /* Adjust as necessary to control column width */
    /* Add padding or margin as needed for spacing */
}
/* Keyframe Animation */
@keyframes buttonHoverAnimation {
    0% {
        transform: scale(1);
        background-color: #490d73;
    }
    100% {
        transform: scale(1.05);
        background-color: #5a0e83;
    }
}

/* Button Style */
.back-to-users-link {
      /* Existing styles */
      background-color: red; /* Red background color */
    transition: all 0.3s ease; /* Smooth transition for hover effects */
    position: relative; /* For pseudo-element positioning */
    overflow: hidden; /* Ensures the pseudo-element doesn't overflow */

    /* New style for rounded corners */
    border-radius: 20px; /* Adjust as needed for desired roundness */
}

/* Hover Effect with Pseudo-element for Gradient */
.back-to-users-link::before {
    content: '';
    position: absolute;
    top: 0;
    right: -100%; /* Start from the right, outside the button */
    bottom: 0;
    left: 0;
    background-image: linear-gradient(to right, red, purple); /* Gradient from red to purple */
    transition: right 0.3s ease; /* Transition for the sliding effect */
    z-index: -1;
}

.back-to-users-link:hover::before {
    right: 0; /* Move the pseudo-element to cover the button */
}

/* Hover Effect */
.back-to-users-link:hover {
    animation: buttonHoverAnimation 0.3s forwards; /* Apply the animation */
    color: #fff; /* Optional: Change text color on hover */
    text-decoration: none; /* Optional: Remove underline on hover */
}


.back-to-users-link i {
    margin-right: 8px; /* Space between icon and text */
}
 
    </style>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script>
        var firebaseConfig = {
            // ...Your Firebase configuration
            apiKey: "AIzaSyDs2gZJ6wIRDOqEtzyIT7toug3Xs3-_w1E",
        authDomain: "user-7c7f8.firebaseapp.com",
        projectId: "user-7c7f8",
        storageBucket: "user-7c7f8.appspot.com",
        messagingSenderId: "55544751979",
        appId: "1:55544751979:web:40366cb78cb1cf8162ce2e",
        measurementId: "G-FP9KRJ1GV3"
        };
        firebase.initializeApp(firebaseConfig);
    </script>
</head>
<body>

   
    <nav class="nav nav-borders justify-content-center">
        <!-- Centered Links -->
        <div class="back-button-container" style="padding: 1rem;">
            <a href="users.html" class="btn btn-primary back-to-users-link">
                <i class="fa fa-arrow-left"></i> Go Back            </a>
        </div>
        
        <!-- Right-aligned dropdown -->
        <div class="dropdown ms-auto"> <!-- Added ms-auto for right alignment -->
            <a class="nav-link dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                <img src="https://cdn-icons-png.flaticon.com/512/4140/4140048.png" alt="Profile Icon" class="profile-icon">
            </a>
    
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <li><a class="dropdown-item" href="account.html">Edit Profile</a></li>
                <li><a class="dropdown-item" href="parametres.html">Settings</a></li>
                <li><a class="dropdown-item" href="Contact-us.html">Help & Support</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="javascript:void(0);" id="signOutButton">Logout</a></li>
            </ul>
        </div>
    </nav>
    
      

    <div id="userProfile" class="profile-container">
        <!-- Dynamic user information will be displayed here -->
    </div>
    <script>
        function formatShortBio(shortBio) {
            const words = shortBio.split(' ');
            const lines = [];
            for (let i = 0; i < words.length; i += 7) { 
                lines.push(words.slice(i, i + 7).join(' '));
            }
            return lines.join('<br>'); // Use <br> to break lines in HTML
        }

        function fetchAndDisplayUserInfo() {
            const params = new URLSearchParams(window.location.search);
            const userId = params.get('userId');

            if (!userId) {
                document.getElementById('userProfile').innerText = "User not found.";
                return;
            }

            const userRef = firebase.database().ref('users/' + userId);
            userRef.once('value').then(snapshot => {
                const userData = snapshot.val();
                if (userData) {
                    displayUserInfo(userData);
                } else {
                    document.getElementById('userProfile').innerText = "User not found.";
                }
            }).catch(error => {
                document.getElementById('userProfile').innerText = "Error loading profile.";
            });
        }

        function displayUserInfo(userData) {
    const userProfileDiv = document.getElementById('userProfile');

    userProfileDiv.innerHTML = `
        <div class="profile-header">
           
         <img src="${userData.profileImageUrl || 'http://bootdey.com/img/Content/avatar/avatar1.png'}" alt="Profile Picture" class="profile-image">
         <h1>${userData.username     || 'No username provided.'}</h1>
         <a href="mailto:${userData.Email}" class="send-email">Contact me</a>

        </div>
        <div class="profile-content">
            <h2>Personal Informations : </h2>
            <div class="professional-info">
                <div class="professional-column">
                    <p><strong>Nom:</strong> ${userData.firstName || 'N/A'}</p>
                </div>
                <div class="professional-column">
                    <p><strong>Prénom:</strong> ${userData.lastName || 'N/A'}</p>
                </div>
            </div>

            <div class="professional-info">
                <div class="professional-column">
                    <p><strong>Gender:</strong> ${userData.gender || 'N/A'}</p>
                </div>
                <div class="professional-column">
                    <p><strong>Age:</strong> ${userData.Age || 'N/A'}</p>
                </div>
            </div>
            <div class="professional-info">
                <div class="professional-column">
                    <p><strong>Date de Naissance:</strong> ${userData.birthDate || 'N/A'}</p>
                </div>
                <div class="professional-column">
                    <p><strong>Lieu de Naissance:</strong> ${userData.birthPlace || 'N/A'}</p>
                </div>
            </div>
            <p><strong>Bio:</strong> ${userData.biography || 'No bio provided.'}</p>
           

            <h2>Academic Informations : </h2>
            <div class="professional-info">
                <div class="professional-column">
                    <p><strong>Ecole:</strong> ${userData.Ecole || 'N/A'}</p>
                </div>
                <div class="professional-column">
                    <p><strong>Ville:</strong> ${userData.Ville || 'N/A'}</p>
                </div>
            </div>
            <div class="professional-info">
                <div class="professional-column">
                    <p><strong>Filiere:</strong> ${userData.filiere || 'N/A'}</p>
                </div>
                <div class="professional-column">
                    <p><strong>Promotion:</strong> ${userData.promotion || 'N/A'}</p>
                </div>
            </div>

           <br>
            <h2>Contact Informations : </h2>
            <div class="professional-info">
                <div class="professional-column">
                    <p><strong>Phone Number:</strong> ${userData.phoneNumber || 'N/A'}</p>
                </div>
                <div class="professional-column">
                    <p><strong>Email:</strong> ${userData.Email || 'N/A'}</p>
                </div>
            </div>
        </div>
    `;
}



        window.onload = function() {
            fetchAndDisplayUserInfo();
        };
    </script>
</body>
</html>